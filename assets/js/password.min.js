DOM={passwForm:".password-strength",passwErrorMsg:".password-strength__error",passwInput:document.querySelector(".password-strength__input"),strengthBar:document.querySelector(".password-strength__bar"),submitBtn:document.querySelector(".register_form__btn button")};const findParentNode=(elem,parentClass)=>{for(parentClass=parentClass.slice(1,parentClass.length);;){if(elem.classList.contains(parentClass))return elem;elem=elem.parentNode}},getPasswordVal=input=>input.value,testPasswRegexp=(passw,regexp)=>regexp.test(passw),testPassw=passw=>{let strength="none";const moderate=/(?=.*[A-Z])(?=.*[a-z]).{5,}|(?=.*[\d])(?=.*[a-z]).{5,}|(?=.*[\d])(?=.*[A-Z])(?=.*[a-z]).{5,}/g,strong=/(?=.*[A-Z])(?=.*[a-z])(?=.*[\d]).{7,}|(?=.*[\!@#$%^&*()\\[\]{}\-_+=~`|:;"'<>,./?])(?=.*[a-z])(?=.*[\d]).{7,}/g,extraStrong=/(?=.*[A-Z])(?=.*[a-z])(?=.*[\d])(?=.*[\!@#$%^&*()\\[\]{}\-_+=~`|:;"'<>,./?]).{9,}/g;return testPasswRegexp(passw,extraStrong)?strength="extra":testPasswRegexp(passw,strong)?strength="strong":testPasswRegexp(passw,moderate)?strength="moderate":passw.length>0&&(strength="weak"),strength},testPasswError=passw=>{const errorSymbols=/\s/g;return testPasswRegexp(passw,errorSymbols)},setStrengthBarValue=(bar,strength)=>{let strengthValue;switch(strength){case"weak":strengthValue=25,bar.setAttribute("aria-valuenow",strengthValue);break;case"moderate":strengthValue=50,bar.setAttribute("aria-valuenow",strengthValue);break;case"strong":strengthValue=75,bar.setAttribute("aria-valuenow",strengthValue);break;case"extra":strengthValue=100,bar.setAttribute("aria-valuenow",strengthValue);break;default:strengthValue=0,bar.setAttribute("aria-valuenow",0)}return strengthValue},setStrengthBarStyles=(bar,strengthValue)=>{switch(bar.style.width=`${strengthValue}%`,bar.classList.remove("bg-success","bg-info","bg-warning"),strengthValue){case 25:bar.classList.add("bg-danger"),bar.textContent="Weak";break;case 50:bar.classList.remove("bg-danger"),bar.classList.add("bg-warning"),bar.textContent="Moderate";break;case 75:bar.classList.remove("bg-danger"),bar.classList.add("bg-info"),bar.textContent="Strong";break;case 100:bar.classList.remove("bg-danger"),bar.classList.add("bg-success"),bar.textContent="Extra Strong";break;default:bar.classList.add("bg-danger"),bar.textContent="",bar.style.width="0"}},setStrengthBar=(bar,strength)=>{const strengthValue=setStrengthBarValue(bar,strength);setStrengthBarStyles(bar,strengthValue)},unblockSubmitBtn=(btn,strength)=>{btn.disabled="none"===strength||"weak"===strength},findErrorMsg=input=>{const passwForm=findParentNode(input,DOM.passwForm);return passwForm.querySelector(DOM.passwErrorMsg)},showErrorMsg=input=>{const errorMsg=findErrorMsg(input);errorMsg.classList.remove("js-hidden")},hideErrorMsg=input=>{const errorMsg=findErrorMsg(input);errorMsg.classList.add("js-hidden")},passwordStrength=(input,strengthBar,btn)=>{const passw=getPasswordVal(input),error=testPasswError(passw);if(error)showErrorMsg(input);else{hideErrorMsg(input);const strength=testPassw(passw);setStrengthBar(strengthBar,strength),unblockSubmitBtn(btn,strength)}},passwordVisible=passwField=>{const passwType=passwField.getAttribute("type");let visibilityStatus;return"text"===passwType?(passwField.setAttribute("type","password"),visibilityStatus="hidden"):(passwField.setAttribute("type","text"),visibilityStatus="visible"),visibilityStatus},changeVisibiltyBtnIcon=(btn,status)=>{const hiddenPasswIcon=btn.querySelector(`${DOM.passwVisibility_icon}[data-visible="hidden"]`),visibilePasswIcon=btn.querySelector(`${DOM.passwVisibility_icon}[data-visible="visible"]`);"visible"===status?(visibilePasswIcon.classList.remove("js-hidden"),hiddenPasswIcon.classList.add("js-hidden")):"hidden"===status&&(visibilePasswIcon.classList.add("js-hidden"),hiddenPasswIcon.classList.remove("js-hidden"))},passwVisibilitySwitcher=(passwField,visibilityToggler)=>{const visibilityStatus=passwordVisible(passwField);changeVisibiltyBtnIcon(visibilityToggler,visibilityStatus)};DOM.passwInput.addEventListener("input",()=>{passwordStrength(DOM.passwInput,DOM.strengthBar,DOM.submitBtn)});